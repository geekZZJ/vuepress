<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <p>proxy demo</p>
    <script>
      // const data = {
      //   name: 'zzj',
      //   age: 12,
      // }
      const data = ['a', 'b', 'c']

      const proxyData = new Proxy(data, {
        get(target, key, receiver) {
          // 原型的属性不处理
          const ownKeys = Reflect.ownKeys(target)
          // 只处理本身的属性
          if (ownKeys.includes(key)) {
            console.log('get', key)
          }
          const result = Reflect.get(target, key, receiver)
          // 返回结果
          return result
        },
        set(target, key, val, receiver) {
          const result = Reflect.set(target, key, val, receiver)
          console.log('set', key, val)
          // console.log('result', result)
          // 是否设置成功
          return result
        },
        deleteProperty(target, key) {
          const result = Reflect.deleteProperty(target, key)
          console.log('delete', key)
          console.log('result', result)
          // 是否删除成功
          return result
        },
      })

      // proxyData[2]
      // proxyData.name = 'zzj1'
      // delete proxyData.age
      proxyData.push('d')
      // get push
      // get length
      // set 3 d
      // result true
      // set length 4
      // result true
    </script>
  </body>
</html>
